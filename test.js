const addon = require('./resources/addon.node')
// const addon = require('./dist/win-ia32-unpacked/resources/app.asar.unpacked/resources/addon.node')

// const data = [
//   0,     1,     2,     3,     4,     5,     6,     7,
//         8,     9,    10,    11,    12,    13,    14,    15,
//        16,    17,    18,    19,    20,    21,    22,    23,
//        24,    25,    26,    27,    28,    29,    30, 66469,
//     65509, 64507, 63045, 62586, 61710, 60791, 59789, 59624,
//     59374, 59125, 58583, 57748, 56955, 56497, 55871, 55245,
//     54829, 54287, 53786, 53453, 53246, 53246, 52914, 52790,
//     52708, 52584, 52544, 52504, 52504, 52465
// ]

// const qb_0 = 21600
// const t_known = 28

// const { kr, kb } = {
//   kr: 0.000506158207155369,
//   kb: 0.0914879598910923,
//   c1: 13566.7144279145,
//   c2: -3685626.74887080,
//   c3: -2.61509787033952,
//   probability: 0.133122927816067,
//   // t_data: [
//   //   0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25,
//   //   26, 27, 28, 29, 30, 31
//   // ],
//   // qr_0: 513056,
//   // qtsquare_data: [
//   //   513056, 511238, 509444, 507673, 505926, 504202, 502502, 500825, 499171, 497540, 495933, 494348,
//   //   492786, 491247, 489731, 488237, 486766, 485318, 483892, 482488, 481107, 479748, 478411, 477096,
//   //   475804, 474533, 473285, 472058, 470854, 469671, 468510, 467370
//   // ],
//   // qtfisher_data: [
//   //   513056, 511231, 509431, 507656, 505906, 504180, 502478, 500801, 499147, 497518, 495911, 494329,
//   //   492769, 491233, 489720, 488230, 486762, 485317, 483894, 482494, 481115, 479758, 478423, 477110,
//   //   475817, 474546, 473296, 472067, 470859, 469671, 468503, 467356
//   // ],
//   // t_size: 32,
//   // qtsquare_size: 32,
//   // qtfisher_size: 32
// }
// // console.log(process.arch)

const { kr, kb, data, t_known } = {
  kr: 0.020188222533488998,
  kb: 0.004224213893494401,
  c1: 1.7480110769427963,
  c2: 1.6827724501633357,
  c3: -1.005991165984078,
  probability: 0.09978435894873816,
  t_data: [
    0, 2, 8, 13, 14, 15, 21, 22, 25, 27, 30, 31, 32, 36, 42, 46, 49, 51, 54, 57, 59, 62, 63, 65, 68,
    76, 78, 83, 91, 104, 121
  ],
  qr_0: 526,
  qtsquare_data: [
    526, 521, 509, 499, 497, 496, 486, 485, 481, 478, 475, 474, 473, 469, 465, 463, 462, 461, 461,
    461, 461, 461, 461, 462, 463, 468, 469, 474, 484, 505, 543
  ],
  qtfisher_data: [
    526, 520, 509, 502, 499, 497, 486, 486, 481, 476, 474, 471, 467, 463, 453, 444, 440, 434, 432,
    423, 422, 415, 413, 412, 405, 391, 390, 380, 367, 342, 314
  ],
  t_size: 31,
  qtsquare_size: 31,
  qtfisher_size: 31,
  error_code: NaN,
  norm: 10.966996401657081,
  norm2: 12.867929440148728
}

const { compare_data, inital_troops, time_known } = {
  compare_data: [
    0, 2, 8, 13, 14, 15, 21, 22, 25, 27, 30, 31, 32, 36, 42, 46, 49, 51, 54, 57, 59, 62, 63, 65, 68,
    76, 78, 83, 91, 104, 121, 526, 510, 506, 502, 498, 494, 488, 487, 483, 477, 473, 467, 463, 452,
    446, 441, 426, 421, 415, 407, 403, 399, 395, 387, 383, 377, 368, 363, 357, 351, 346
  ],
  inital_troops: 526,
  time_known: 30
}

// console.log(addon.probabilityPIMC(kr, kb, compare_data, time_known))

try {
  console.log(addon.calculator(compare_data, inital_troops, time_known))
} catch (error) {
  console.log(error)
}
